<!doctype html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><link rel=icon href=/images/icon.png type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><script async src="https://www.googletagmanager.com/gtag/js?id=G-WS6K0SDB05"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WS6K0SDB05")}</script><meta property="og:url" content="/blog/2023-09-05-best-frenemies-julia-and-python/"><meta property="og:site_name" content="Abel Soares Siqueira"><meta property="og:title" content="Best Frenemies: Julia and Python"><meta property="og:description" content="Julia and Python are often seen as competitors, but in this video I want to show the integration between them. Using the PythonCall and the JuliaCall packages we can call Julia from Python and Python from Julia. Check the video out or check edited transcript below.
Don’t forget to like and subscribe.
Download the python-from-julia.jl Pluto notebook.
Download the julia-from-python.ipynb Jupyter notebook.
There are currently two ways to integrate Python in Julia and Julia in Python. These two main packages are PyCall and PythonCall and their corresponding Python package. I have talked about PyCall in a series of blog posts in the past, comparing Python being improved by C++ and Python being improved by Julia up to the point that we actually made the Julia code faster than the C++ code in this specific instance. Now I’m going to talk about the PythonCall package and the corresponding JuliaCall package which are newer."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-09-05T00:00:00+00:00"><meta property="article:modified_time" content="2023-09-05T00:00:00+00:00"><meta property="article:tag" content="Julia"><meta property="article:tag" content="Floating-Point"><meta property="article:tag" content="Scientific-Computing"><meta property="article:tag" content="Numerical-Methods"><meta property="article:tag" content="Math"><meta name=twitter:card content="summary"><meta name=twitter:title content="Best Frenemies: Julia and Python"><meta name=twitter:description content="Julia and Python are often seen as competitors, but in this video I want to show the integration between them. Using the PythonCall and the JuliaCall packages we can call Julia from Python and Python from Julia. Check the video out or check edited transcript below.
Don’t forget to like and subscribe.
Download the python-from-julia.jl Pluto notebook.
Download the julia-from-python.ipynb Jupyter notebook.
There are currently two ways to integrate Python in Julia and Julia in Python. These two main packages are PyCall and PythonCall and their corresponding Python package. I have talked about PyCall in a series of blog posts in the past, comparing Python being improved by C++ and Python being improved by Julia up to the point that we actually made the Julia code faster than the C++ code in this specific instance. Now I’m going to talk about the PythonCall package and the corresponding JuliaCall package which are newer."><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--text-link-color:#007bff;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#c4d7f2;--text-secondary-color-dark:#b0b3b8;--text-link-color-dark:#eea243;--background-color-dark:#181818;--secondary-background-color-dark:#212529;--primary-color-dark:#eea243;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color)!important}body::-webkit-scrollbar{height:0;width:8px;background-color:var(--background-color)}::-webkit-scrollbar-track{border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background:#b0b0b0;outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><meta name=description content><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-6/all-6.4.2.js></script><link rel=stylesheet href=/style.css><title>Best Frenemies: Julia and Python | Abel Soares Siqueira</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><header id=profileHeader><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/>Abel Soares Siqueira</a><div><input id=search autocomplete=off class="form-control mr-sm-2 d-none d-md-block" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text d-block d-md-none"><div class=nav-link><input id=search autocomplete=off class="form-control mr-sm-2" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div></li><li class="nav-item navbar-text"><a class=nav-link href=/#projects aria-label=projects>Selected links</a></li><li class="nav-item navbar-text"><a class=nav-link href=/blog title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><a class=nav-link href=/tags title=Tags>Tags</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Best Frenemies: Julia and Python</h1><div class=text-center>Sep 5, 2023
<span id=readingTime>min read</span></div></div><div class=featured-image><img class="img-fluid mx-auto d-block" src=/blog/2023-09-05/banner.gif alt="Best Frenemies: Julia and Python"></div><article class="page-content p-2"><p>Julia and Python are often seen as competitors, but in this video I want to show the integration between them. Using the PythonCall and the JuliaCall packages we can call Julia from Python and Python from Julia.
<a href=https://youtu.be/8huiBpkMFwE>Check the video out</a> or check edited transcript below.</p><p>Don&rsquo;t forget to like and subscribe.</p><p><a href=https://youtu.be/8huiBpkMFwE><img src=/blog/2023-09-05/banner.gif alt="Banner for youtube video"></a></p><p>Download the <a href=/blog/2023-09-05/python-from-julia.jl>python-from-julia.jl Pluto notebook</a>.</p><p>Download the <a href=/blog/2023-09-05/julia-from-python.ipynb>julia-from-python.ipynb Jupyter notebook</a>.</p><hr><p>There are currently two ways to integrate Python in Julia and Julia in Python. These two main packages are PyCall and PythonCall and their corresponding Python package.
I have talked about PyCall in a series of blog posts in the past, comparing <a href=/blog/2022-01-19-python-and-julia-1/>Python being improved by C++ and Python being improved by Julia</a> up to the point that we actually made the Julia code faster than the C++ code in this specific instance.
Now I&rsquo;m going to talk about the PythonCall package and the corresponding JuliaCall package which are newer.</p><h2 id=calling-python-from-julia>Calling Python from Julia</h2><p>So very briefly, you install PythonCall, And it installs a Python version for you. Use the conda package to install the packages that you need for Python call. So here I&rsquo;m installing PythonCall in this Pluto environment. I&rsquo;m using Pkg and I&rsquo;m saying conda add seaborne and conda add scikit learn.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#66d9ef>using</span> PythonCall, Random, DataFrames, CondaPkg
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Pkg
</span></span><span style=display:flex><span>Pkg<span style=color:#f92672>.</span><span style=color:#e6db74>pkg</span><span style=color:#e6db74>&#34;conda add seaborn&#34;</span>
</span></span><span style=display:flex><span>Pkg<span style=color:#f92672>.</span><span style=color:#e6db74>pkg</span><span style=color:#e6db74>&#34;conda add scikit-learn&#34;</span>
</span></span></code></pre></div><p>So I&rsquo;m just installing these two packages. And here I am calling some code. This is Julia code as normal. Essentially I&rsquo;m creating a hundred by three matrix with some distribution that depends on whether the Data is from the type A or the type B, which is essentially fake data for a classification problem.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span>Random<span style=color:#f92672>.</span>seed!(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>n <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>p <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>a_or_b <span style=color:#f92672>=</span> rand([<span style=color:#e6db74>:a</span>, <span style=color:#e6db74>:b</span>], n)
</span></span><span style=display:flex><span>μ <span style=color:#f92672>=</span> <span style=color:#66d9ef>Dict</span>(<span style=color:#e6db74>:a</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.5</span>, <span style=color:#e6db74>:b</span> <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1.5</span>)
</span></span><span style=display:flex><span>σ <span style=color:#f92672>=</span> <span style=color:#66d9ef>Dict</span>(<span style=color:#e6db74>:a</span> <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>0.5</span>, <span style=color:#e6db74>:b</span> <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1.5</span>)
</span></span><span style=display:flex><span>X <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  randn() <span style=color:#f92672>*</span> σ[a_or_b[i]] <span style=color:#f92672>+</span> μ[a_or_b[i]]
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>n, j <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>p
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> DataFrame(
</span></span><span style=display:flex><span>  [X a_or_b],
</span></span><span style=display:flex><span>  [[<span style=color:#e6db74>&#34;x</span><span style=color:#e6db74>$i</span><span style=color:#e6db74>&#34;</span> <span style=color:#66d9ef>for</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>p]; <span style=color:#e6db74>&#34;a_or_b&#34;</span>],
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>sns <span style=color:#f92672>=</span> pyimport(<span style=color:#e6db74>&#34;seaborn&#34;</span>)
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>pairplot(pytable(df), hue<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;a_or_b&#34;</span>)
</span></span></code></pre></div><p>So if you look at these and you have seen the classification problem before, you probably recognize the seaborne package that plots all of the three axis. and the classes of these points. So the way that we do that, so all the way up to here, this is all just Julia, nothing new. But then we just use pyimport seaborn to import that Python package. And then we call sns.pairplot. And now you&rsquo;re just calling some Python code.</p><p>I&rsquo;m just calling the pairplot function from Seaborn. I&rsquo;m giving it a data frame, but converted using pytable, which is part of the package that we just installed. So this is how you can easily just use a Python package inside Julia.</p><p>Here is the output:</p><p><img src=/blog/2023-09-05/python-from-julia-1.png alt="Seaborn plot 1"></p><p>Down here I have a bit longer example now using the scikit-learn package.
So I&rsquo;m using sklearn.naive_bayes. I then have the gaussianNB constructor. I create a classifier. And down here I fit this classifier, the input of this classifier is a Julia matrix and a Julia array of integers. So it just works. And then when I call predict, I have a new vector, y hat.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span>nb <span style=color:#f92672>=</span> pyimport(<span style=color:#e6db74>&#34;sklearn.naive_bayes&#34;</span>)
</span></span><span style=display:flex><span>clf <span style=color:#f92672>=</span> nb<span style=color:#f92672>.</span>GaussianNB()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>X <span style=color:#f92672>=</span> <span style=color:#66d9ef>Matrix</span>(df[<span style=color:#f92672>:</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#66d9ef>end</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>y <span style=color:#f92672>=</span> <span style=color:#66d9ef>Int</span><span style=color:#f92672>.</span>(df[<span style=color:#f92672>:</span>, <span style=color:#66d9ef>end</span>] <span style=color:#f92672>.==</span> <span style=color:#e6db74>:a</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>clf<span style=color:#f92672>.</span>fit(X, y)
</span></span><span style=display:flex><span>ŷ <span style=color:#f92672>=</span> clf<span style=color:#f92672>.</span>predict(X)
</span></span><span style=display:flex><span>df_predict <span style=color:#f92672>=</span> copy(df)
</span></span><span style=display:flex><span>df_predict[<span style=color:#f92672>!</span>, <span style=color:#e6db74>:predict</span>] <span style=color:#f92672>=</span> pyconvert(<span style=color:#66d9ef>Vector</span>, ŷ)
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>pairplot(pytable(df_predict), hue<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;predict&#34;</span>)
</span></span></code></pre></div><p>The way that I chose to plot this is again, giving it to pyplot. I just convert this vector. This is a Python vector. So I convert it to a Julia vector using the pyconvert function.</p><p>Here is the output:</p><p><img src=/blog/2023-09-05/python-from-julia-2.png alt="Seaborn plot 2"></p><h2 id=calling-julia-from-python>Calling Julia from Python</h2><p>So to use Julia from inside Python, you can just install the Julia call package and just <code>pip install juliacall</code>.
You will have access to import main, and you can give it a name like <code>jl</code>, and you can see here that it installs a Julia for you, so you don&rsquo;t have to worry about that.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> juliacall <span style=color:#f92672>import</span> Main <span style=color:#66d9ef>as</span> jl
</span></span></code></pre></div><p>To install Julia packages, you want to use The juliapkg package. So it&rsquo;s also <code>pip install juliapkg</code>.
And then you have to say here, juliapkg.Add, and give the package name and the UUID. These might be harder to get but the easiest way will be to just open Julia and say, add JuMP and ask for the status and it&rsquo;ll list this information for you.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> juliapkg
</span></span><span style=display:flex><span>juliapkg<span style=color:#f92672>.</span>add(<span style=color:#e6db74>&#34;JuMP&#34;</span>, <span style=color:#e6db74>&#34;4076af6c-e467-56ae-b986-b466b2749572&#34;</span>)
</span></span><span style=display:flex><span>juliapkg<span style=color:#f92672>.</span>add(<span style=color:#e6db74>&#34;Ipopt&#34;</span>, <span style=color:#e6db74>&#34;b6b21f68-93f8-5de0-b562-5493be1d77c9&#34;</span>)
</span></span><span style=display:flex><span>juliapkg<span style=color:#f92672>.</span>resolve()
</span></span></code></pre></div><p>And when you add your packages, you say resolve to get them installed. And you can also use a json file and list this information on the json file, which I ignore here. So we just have a single notebook. So this install this jump and ipopt packages and jump and ipopt, you know, are packages for optimization.</p><p>So to just show this package working, I&rsquo;m gonna implement a simple optimization model to find the best investment if I try to base myself on historic information of these five stocks. So this is, is known as the Markowitz model, which is a simple model. So don&rsquo;t use it in your stock selection.</p><p>But anyway, so just so you know, I&rsquo;m using yfinance. So this is all Python. I download closing data from these stocks. I I&rsquo;m just plotting for you to see and computing the returns. I have to use the mean value and the covariance matrix. Just so I can compute the risk and the expected return of this selection.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> yfinance <span style=color:#66d9ef>as</span> yf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> yf<span style=color:#f92672>.</span>download([<span style=color:#e6db74>&#34;AAPL&#34;</span>, <span style=color:#e6db74>&#34;MSFT&#34;</span>, <span style=color:#e6db74>&#34;AMZN&#34;</span>, <span style=color:#e6db74>&#34;NVDA&#34;</span>, <span style=color:#e6db74>&#34;GME&#34;</span>], start<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2018-01-01&#34;</span>, end<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2022-12-31&#34;</span>)
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> data[<span style=color:#e6db74>&#34;Close&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>returns <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>diff() <span style=color:#f92672>/</span> data
</span></span><span style=display:flex><span>returns <span style=color:#f92672>=</span> returns[<span style=color:#ae81ff>1</span>:]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mean_returns <span style=color:#f92672>=</span> returns<span style=color:#f92672>.</span>mean()
</span></span><span style=display:flex><span>std_returns <span style=color:#f92672>=</span> returns<span style=color:#f92672>.</span>cov()
</span></span></code></pre></div><p>And now we start using Julia. So <code>jl.seval</code>, which is a string evaluation using jump, using Ipopt. Then you can say things like model equals Model(Ipopt.Optimizer). You could use another syntax here if you try to get the jump value. So <code>jl.JuMP</code>, and you can just call model directly but then you have to write more.</p><p>So this was just simpler, not going to say it&rsquo;s faster. I don&rsquo;t know one way to pass data around. If you want to pass the actual data to Julia, you say JL dot the variable name equals data. And then it, this data that is just a Python thing is now also a Julia thing. I&rsquo;m actually not using this for anything, but just so you know.</p><p>The Markowitz model needs the mean return, the expected return, and this covariance matrix.
And what it does is it has one variable for each one of my stock, and I want to minimize the risk.
So if you don&rsquo;t know this, that&rsquo;s fine.
This is Julia, that&rsquo;s the important thing.
And I want an expected return here that I&rsquo;m just saying it needs to be positive.
These are constraints and here you are investing all of your money.
And that&rsquo;s it.
That&rsquo;s the whole model.
You optimize this model.
All of this is Julia. <code>jl.seval</code>.
I&rsquo;m obtaining the value of the allocation and here I&rsquo;m getting the objective value, which is how much risk my selection is on, which doesn&rsquo;t matter a lot for us.
The important part is that I can plot these things now back into Python. So that&rsquo;s it. This is like just a Julia insertion in my Python notebook.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;using JuMP&#34;</span>)
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;using Ipopt&#34;</span>)
</span></span><span style=display:flex><span>model <span style=color:#f92672>=</span> jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;model = Model(Ipopt.Optimizer)&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>data <span style=color:#f92672>=</span> data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>n <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>shape[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>mean_r <span style=color:#f92672>=</span> mean_returns<span style=color:#f92672>.</span>values
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>std_r <span style=color:#f92672>=</span> std_returns<span style=color:#f92672>.</span>values
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;@variable(model, x[1:n] &gt;= 0)&#34;</span>)
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;@objective(model, Min, dot(x, std_r, x))&#34;</span>)
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;@constraint(model, dot(x, mean_r) / n &gt;= 0)&#34;</span>)
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;@constraint(model, sum(x) == 1)&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;optimize!(model)&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span> jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;value.(x)&#34;</span>)
</span></span><span style=display:flex><span>f <span style=color:#f92672>=</span> jl<span style=color:#f92672>.</span>seval(<span style=color:#e6db74>&#34;objective_value(model)&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>model
</span></span></code></pre></div><p>Now I&rsquo;m back to Python.
So here I can analyze the solution. So this brown curve. So we had a pretty good result.
Here you can see the allocation.
It&rsquo;s mostly Microsoft stocks and hindsight is 20/20, so please don&rsquo;t use this for your investment.
This is not investment suggestion or advising of any kind.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sol_data <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>copy()
</span></span><span style=display:flex><span>sol_data[<span style=color:#e6db74>&#39;solution&#39;</span>] <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>matmul(data<span style=color:#f92672>.</span>values, x)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>plot(sol_data)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>legend(sol_data<span style=color:#f92672>.</span>columns)
</span></span></code></pre></div><p><img src=/blog/2023-09-05/julia-from-python-1.png alt="Stocks plot"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>plt<span style=color:#f92672>.</span>bar(range(<span style=color:#ae81ff>0</span>, len(x)), x)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>xticks(range(<span style=color:#ae81ff>0</span>, len(x)), data<span style=color:#f92672>.</span>columns)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Allocation&#34;</span>)
</span></span></code></pre></div><p><img src=/blog/2023-09-05/julia-from-python-2.png alt="Allocation plot"></p><h2 id=final-remarks>Final remarks</h2><p>Calling Julia from Python, Python from Julia is a great way of expanding your horizons.
So Julia currently has this lack of libraries issue that people keep bringing up, but one quick way to solve this is to just import the packages from Python or from other languages.
You can also do the same for R, Java, C, Fortran, many languages.</p><p>And in the other hand, if you have some code that could benefit from some speed up, but in a higher level language, you could just try using Julia instead of the traditional C++ integration that Python does frequently.</p><p>I have also talked today about two key things.
I have talked about machine learning and I have talked about optimization.
Don&rsquo;t worry if you do not get the specific topics.
If you want me to talk more about those things, let me know in the comments.</p><p>Now I have questions for you.
What other kind of integration would you think is very important for Julia?
Do you think the Python integration that we have seen today is enough to convince people to use Julia more, coming from Python?</p><p>Do you think companies can adopt Julia if you can use machine learning and you can use notebooks and that&rsquo;s it? You can just&mldr; bring up the Julia good stuff, but keep using Python. Let me know what you think in the comments.</p><p>And thanks a lot for watching today&rsquo;s video, and I hope you enjoyed. Don&rsquo;t forget to like and subscribe, click the bell button, and I&rsquo;ll see you next time.</p><p>Bye bye.</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div id=stickySideBar class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><a href=#calling-python-from-julia>Calling Python from Julia</a></li><li><a href=#calling-julia-from-python>Calling Julia from Python</a></li><li><a href=#final-remarks>Final remarks</a></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=/tags/julia target=_blank>julia</a></li><li class=list-inline-item><a href=/tags/floating-point target=_blank>floating-point</a></li><li class=list-inline-item><a href=/tags/scientific-computing target=_blank>scientific-computing</a></li><li class=list-inline-item><a href=/tags/numerical-methods target=_blank>numerical-methods</a></li><li class=list-inline-item><a href=/tags/math target=_blank>math</a></li></ul></aside><aside class=social><h5>Social</h5><div class=social-content><ul class=list-inline><li class="list-inline-item text-center"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=%2fblog%2f2023-09-05-best-frenemies-julia-and-python%2f"><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://twitter.com/share?text=Best%20Frenemies%3a%20Julia%20and%20Python&url=%2fblog%2f2023-09-05-best-frenemies-julia-and-python%2f"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://api.whatsapp.com/send?text=Best%20Frenemies%3a%20Julia%20and%20Python: %2fblog%2f2023-09-05-best-frenemies-julia-and-python%2f"><i class="fab fa-whatsapp"></i></a></li><li class="list-inline-item text-center"><a target=_blank href='mailto:?subject=Best%20Frenemies%3a%20Julia%20and%20Python&amp;body=Check%20out%20this%20site %2fblog%2f2023-09-05-best-frenemies-julia-and-python%2f'><i class="fa fa-envelope"></i></a></li></ul></div></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><div class=progress><div id=scroll-progress-bar class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=100></div></div><script src=/js/scrollProgressBar.js></script><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let stickySideBarElem=document.getElementById("stickySideBar"),stickyNavBar=!1;if(stickyNavBar){let e=document.getElementById("profileHeader"),t=e.offsetHeight+15;stickySideBarElem.style.top=t+"px"}else stickySideBarElem.style.top="50px"</script><script src=/js/readingTime.js></script></div><footer><div class="text-center pt-2"></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center"><div class=pb-2><a href=/ title="Abel Soares Siqueira"><img alt="Footer logo" src=/images/icon.png height=40px width=40px></a></div>&copy; 2024 All rights reserved<div class=text-secondary>Made with
<span class=text-danger>&#10084;
</span>and
<a href=https://github.com/gurusabarish/hugo-profile target=_blank title="Designed and developed by gurusabarish">Hugo Profile</a></div></div></div></div></footer><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><script src=/js/search.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js integrity=sha384-M5jmNxKC9EVnuqeMwRHvFuYUE8Hhp0TgBruj/GZRkYtiMrCRgH7yvv5KY+Owi7TW crossorigin=anonymous></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['\\(','\\)']],
        displayMath: [['$$','$$'], ['\[','\]']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: { equationNumbers: { autoNumber: "AMS" },
             extensions: ["AMSmath.js", "AMSsymbols.js"] }
      }
    });
</script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>